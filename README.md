# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура
Приложение спроектированно в соответствии с архитектурой `MVP`.
* `Model` - Слой для управления данными и взаимодействия с сервером.
* `View` - Слой отображения данных и обработка пользовательских действий.
* `Presenter` - Слой соединяет `Model` и `View`.

## Базовый код
### Класс Api
Класс `Api` предназначен для работы с сервером через HTTP-запросы. Его основная задача — предоставить удобные методы для отправки запросов и обработки ответов. Основные методы:
* Конструктор: Принимает базовый URL и дополнительные настройки запросов.
* `get` выполняет запрос по указанному URI. Возвращает данные, полученные от сервера, в формате JSON. Если запрос не удался, возвращает ошибку.
* `post` выполняет запрос для создания или изменения данных на сервере. Поддерживает методы POST, PUT и DELETE. Принимает URI, данные в формате объекта и тип метода.
* `handleResponse` обрабатывает ответ сервера. Если запрос успешен, преобразует ответ в JSON. В случае ошибки возвращает сообщение об ошибке из ответа сервера или текстовый статус ошибки

### Класс EventEmitter
Класс `EventEmitter` реализует брокер событий, позволяя компонентам приложения обмениваться данными без прямой связи друг с другом. Этот подход улучшает модульность и изоляцию компонентов. Основные методы:
* `on` позволяет подписаться на событие. Если событие с указанным именем ещё не зарегистрировано, оно создаётся.
* `off` удаляет указанного подписчика с события. Если у события больше нет подписчиков, оно удаляется.
* `emit` генерирует событие с указанными данными. Все подписчики события (или соответствующие шаблону) будут уведомлены.
* `onAll` позволяет подписаться на все события. Полезно для отладки или ведения логов.
* `offAll` удаляет всех подписчиков для всех событий.
* `trigger` создаёт функцию, которая генерирует указанное событие при вызове. Это удобно для создания автоматически инициируемых событий.

### Класс Component
Класс `Component` предназначен для работы с DOM в веб-приложениях. Класс содержит базовый функционал для управления HTML-элементами, включая управление стилями, текстом, состояниями блокировки и отображения, а также рендеринг данных. Он используется как основа для создания дочерних компонентов.
* `toggleClass` добавляет, удаляет или переключает CSS-класс для указанного элемента.
* `setText` устанавливает текстовое содержимое элемента.
* `setDisabled` управляет состоянием блокировки элемента (disabled).
* `setHidden` cкрывает элемент, устанавливая его стиль `display: none`.
* `setVisible` делает элемент видимым, удаляя стиль `display: none`.
* `setImage` устанавливает источник изображения и альтернативный текст для элемента `<img>`.
* `render` основной метод рендеринга. Передаёт данные в экземпляр компонента и возвращает корневой элемент `container`.

### Класс Model
класс `Model` предназначен для работы с данными и их изменениями. Класс включает базовый функционал для управления состоянием модели и оповещения подписчиков об изменениях.
* `emitChanges` Оповещает подписчиков о том, что состояние модели изменилось.

## Данные и типы, используемые в проекте.
### Интерфейс карточек товара.

```
interface IProduct {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number | null;
}
```

### Описание данных в полях оформления заказа.

```
interface IContactInfo {
  payment: string;
  address: string;
  email: string;
  phone: string;
}
```

### Модель списка карточек товаров на главной странице.

```
interface IProductData {
  total: number;
  items: IProduct[];
}
```

### Модель списка карточек товаров в корзине.

```
interface IOrderData {
  items: HTMLElement[];
  total: number;
}
```

